<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Browser | 面试指南</title>
    <meta name="description" content="">
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.cc2a2ebf.css" as="style"><link rel="preload" href="/assets/js/app.17e7384b.js" as="script"><link rel="preload" href="/assets/js/9.7f41828b.js" as="script"><link rel="prefetch" href="/assets/js/13.b419daba.js"><link rel="prefetch" href="/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/assets/js/3.ef3ee796.js"><link rel="prefetch" href="/assets/js/4.2e46cd24.js"><link rel="prefetch" href="/assets/js/5.bec878ff.js"><link rel="prefetch" href="/assets/js/6.539a2935.js"><link rel="prefetch" href="/assets/js/7.22ed9e45.js"><link rel="prefetch" href="/assets/js/8.7646f7cd.js"><link rel="prefetch" href="/assets/js/10.dc5d0640.js"><link rel="prefetch" href="/assets/js/11.194957a4.js"><link rel="prefetch" href="/assets/js/12.9ae0f5ed.js"><link rel="prefetch" href="/assets/js/14.e6b680b7.js"><link rel="prefetch" href="/assets/js/15.f4550f65.js"><link rel="prefetch" href="/assets/js/16.6c41112e.js"><link rel="prefetch" href="/assets/js/17.f5236e37.js"><link rel="prefetch" href="/assets/js/18.7b2decb8.js"><link rel="prefetch" href="/assets/js/19.45ef936f.js"><link rel="prefetch" href="/assets/js/20.b6776b5a.js"><link rel="prefetch" href="/assets/js/21.5ddbd38c.js"><link rel="prefetch" href="/assets/js/22.d6bb9334.js"><link rel="prefetch" href="/assets/js/23.17390f50.js"><link rel="prefetch" href="/assets/js/24.3b2112ec.js"><link rel="prefetch" href="/assets/js/25.b6fac30f.js"><link rel="prefetch" href="/assets/js/26.dbe699e8.js"><link rel="prefetch" href="/assets/js/27.3f5a9dee.js"><link rel="prefetch" href="/assets/js/28.3514e3df.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cc2a2ebf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">面试指南</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/front-end/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/calculation/" class="nav-link">计算机基础</a></div><div class="nav-item"><a href="/interview/" class="nav-link">面试</a></div><div class="nav-item"><a href="https://github.com/lufangyong" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/front-end/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/calculation/" class="nav-link">计算机基础</a></div><div class="nav-item"><a href="/interview/" class="nav-link">面试</a></div><div class="nav-item"><a href="https://github.com/lufangyong" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/front-end/" class="sidebar-link">前端</a></li><li><a href="/front-end/js.html" class="sidebar-link">JS</a></li><li><a href="/front-end/browser.html" class="active sidebar-link">Browser</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/browser.html#dom-事件" class="sidebar-link">DOM 事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/browser.html#dom-事件的级别" class="sidebar-link">DOM 事件的级别</a></li><li class="sidebar-sub-header"><a href="/front-end/browser.html#dom-事件模型" class="sidebar-link">DOM 事件模型</a></li><li class="sidebar-sub-header"><a href="/front-end/browser.html#描述-dom-事件捕获的具体流程" class="sidebar-link">描述 DOM 事件捕获的具体流程</a></li><li class="sidebar-sub-header"><a href="/front-end/browser.html#event-对象的常见应用" class="sidebar-link">Event 对象的常见应用</a></li><li class="sidebar-sub-header"><a href="/front-end/browser.html#自定义事件" class="sidebar-link">自定义事件</a></li><li class="sidebar-sub-header"><a href="/front-end/browser.html#原生-dom-操作" class="sidebar-link">原生 DOM 操作</a></li><li class="sidebar-sub-header"><a href="/front-end/browser.html#事件委托" class="sidebar-link">事件委托</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end/browser.html#跨域" class="sidebar-link">跨域</a></li><li class="sidebar-sub-header"><a href="/front-end/browser.html#cookie" class="sidebar-link">Cookie</a></li><li class="sidebar-sub-header"><a href="/front-end/browser.html#websocket" class="sidebar-link">websocket</a></li><li class="sidebar-sub-header"><a href="/front-end/browser.html#fetch-和-ajax" class="sidebar-link">fetch 和 Ajax</a></li><li class="sidebar-sub-header"><a href="/front-end/browser.html#ajax-请求和原理" class="sidebar-link">ajax 请求和原理</a></li></ul></li><li><a href="/front-end/css.html" class="sidebar-link">CSS</a></li><li><a href="/front-end/frame.html" class="sidebar-link">框架</a></li><li><a href="/front-end/fe-ngineering.html" class="sidebar-link">前端工程化</a></li><li><a href="/front-end/performance.html" class="sidebar-link">前端性能优化</a></li><li><a href="/front-end/http.html" class="sidebar-link">http</a></li><li><a href="/front-end/safe.html" class="sidebar-link">安全</a></li><li><a href="/front-end/design-pattern.html" class="sidebar-link">设计模式</a></li><li><a href="/front-end/node.html" class="sidebar-link">Node</a></li><li><a href="/front-end/recommend.html" class="sidebar-link">学习资源</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="browser"><a href="#browser" aria-hidden="true" class="header-anchor">#</a> Browser</h1> <h2 id="dom-事件"><a href="#dom-事件" aria-hidden="true" class="header-anchor">#</a> DOM 事件</h2> <h3 id="dom-事件的级别"><a href="#dom-事件的级别" aria-hidden="true" class="header-anchor">#</a> DOM 事件的级别</h3> <ul><li>DOM0 element.onclick = function(){};</li> <li>DOM2 element.addEventListener('click', function(){}, false);</li> <li>DOM3 element.addEventListener('keyup', function(){}, false);</li></ul> <p><a href="http://www.cnblogs.com/holyson/p/3914406.html" target="_blank" rel="noopener noreferrer">dom 事件详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>0 级 DOM,分为 2 个：</p> <p><strong>一是在标签内写 onclick 事件</strong></p> <pre><code>&lt;input id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;press me&quot; onclick=&quot;alert('thanks');&quot; /&gt;
</code></pre> <p><strong>二是在 JS 中写 noclick=function(){} 函数</strong></p> <pre><code>document.getElementById('bnt1').onclick = function (){ alert('thanks'); }
</code></pre> <p>为什么没有 1 级 DOM</p> <blockquote><p>DOM 级别 1 于 1998 年 10 月 1 日成为 W3C 推荐标准。1 级 DOM 标准中并没有定义事件相关的内容，所以没有所谓的 1 级 DOM 事件模型。在 2 级 DOM 中除了定义了一些 DOM 相关的操作之外还定义了一个事件模型 ，这个标准下的事件模型就是我们所说的 2 级 DOM 事件模型</p></blockquote> <p>2 级 DOM</p> <ul><li>添加事件：addEventListener(), 可以为元素添加多个事件处理程序，触发时会按照添加顺序依次调用</li> <li>移除事件：removeEventListener(), 不能移除匿名添加的函数</li> <li>默认第三个参数是 false，冒泡，从下往上</li></ul> <p><strong>它们都有三个参数</strong>：</p> <pre><code>第一个参数是事件名（如click）；
第二个参数是事件处理程序函数；
第三个参数如果是true则表示在捕获阶段调用，为false表示在冒泡阶段调用。

IE写法：
document.getElementById(&quot;myTest&quot;).attachEvent(&quot;onclick&quot;, function(){alert(1)});
标准写法：
document.getElementById(&quot;myTest&quot;).addEventListener(&quot;click&quot;, function(){alert(1)}, false);
</code></pre> <p>封装一个添加事件的方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">addEvent</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> ev<span class="token punctuation">,</span> fun<span class="token punctuation">,</span> flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ele<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ele<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span> <span class="token operator">+</span> ev<span class="token punctuation">,</span> fun<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    ele<span class="token punctuation">.</span><span class="token function">addEventListenr</span><span class="token punctuation">(</span>ev<span class="token punctuation">,</span> fun<span class="token punctuation">,</span> flag<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="dom-事件模型"><a href="#dom-事件模型" aria-hidden="true" class="header-anchor">#</a> DOM 事件模型</h3> <p>事件捕捉阶段：事件开始由顶层对象触发，然后逐级向下传播，直到目标的元素；</p> <p>处于目标阶段：处在绑定事件的元素上；</p> <p>事件冒泡阶段：事件由具体的元素先接收，然后逐级向上传播，直到不具体的元素；</p> <p>阻止 冒泡／捕获 <code>event.stopPropagation()</code>和 IE 的<code>event.cancelBubble=true</code></p> <p>捕获是从上往下，冒泡是从下往上</p> <p>DOM 事件绑定</p> <ol><li>绑定事件监听函数：addEventListener 和 attchEvent</li> <li>在 JavaScript 代码中绑定：获取 DOM 元素 <code>dom.onlick = fn</code></li> <li>在 DOM 元素中直接绑定：<code>&lt;div onclick = 'fn()'&gt;</code></li></ol> <p>DOM 事件流包括三个阶段：事件捕获阶段、处于目标阶段、事件冒泡阶段。首先发生的事件捕获，为截获事件提供机会。然后是实际的目标接受事件。最后一个阶段是时间冒泡阶段，可以在这个阶段对事件做出响应。</p> <h3 id="描述-dom-事件捕获的具体流程"><a href="#描述-dom-事件捕获的具体流程" aria-hidden="true" class="header-anchor">#</a> 描述 DOM 事件捕获的具体流程</h3> <ul><li><code>window -&gt; doucument -&gt; html-body -&gt; ... -&gt; 目标元素</code></li> <li>获取 body 节点：<code>document.body</code></li> <li>获取 html 节点：<code>document.documentElement</code> 要记住不是 <code>document.html</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ev <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'ev'</span><span class="token punctuation">)</span>
ev<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'click'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ev captrue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token boolean">true</span>
<span class="token punctuation">)</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'click'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'window captrue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">true</span>
<span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'click'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'document captrue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">true</span>
<span class="token punctuation">)</span>
document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'click'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'html captrue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">true</span>
<span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'click'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'body captrue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">true</span>
<span class="token punctuation">)</span>
<span class="token comment">// 执行结果为</span>
<span class="token comment">// window captrue</span>
<span class="token comment">// document captrue</span>
<span class="token comment">// html captrue</span>
<span class="token comment">// body captrue</span>
<span class="token comment">// ev captrue</span>
</code></pre></div><h3 id="event-对象的常见应用"><a href="#event-对象的常见应用" aria-hidden="true" class="header-anchor">#</a> Event 对象的常见应用</h3> <ul><li>evnet.preventDefault()：阻止默认事件</li> <li>event.stopPropagation()：阻止冒泡</li> <li>event.stoplmmediatepropagation()：</li> <li>event.currentTarget：当前所绑定的事件</li> <li>enent.target：当前被点击的元素</li></ul> <h3 id="自定义事件"><a href="#自定义事件" aria-hidden="true" class="header-anchor">#</a> 自定义事件</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建一个自定义事件</span>
<span class="token keyword">var</span> ev <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'custome'</span><span class="token punctuation">)</span>
<span class="token comment">// 给dom节点绑定事件</span>
dom<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'cuctome'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'custome'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 触发自定义事件</span>
dom<span class="token punctuation">.</span><span class="token function">dispathEvent</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span>
</code></pre></div><h3 id="原生-dom-操作"><a href="#原生-dom-操作" aria-hidden="true" class="header-anchor">#</a> 原生 DOM 操作</h3> <ul><li>如需替换 HTML DOM 中的元素，请使用<code>replaceChild(newnode,oldnode)</code>方法</li> <li>从父元素中删除子元素 <code>parent.removeChild(child)</code>;</li> <li><code>insertBefore(newItem,existingItem)</code> 在指定的已有子节点之前插入新的子节点</li> <li><code>appendChild(newListItem</code>向元素添加新的子节点，作为最后一个子节点</li> <li>document.documentElement - 全部文档</li> <li>document.body - 文档的主体</li></ul> <p><a href="http://www.w3school.com.cn/jsref/dom_obj_all.asp" target="_blank" rel="noopener noreferrer">HTML DOM Element 对象<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>JS 事件：target 与 currentTarget 区别</p> <ul><li>target 在事件流的目标阶段；currentTarget 在事件流的捕获，目标及冒泡阶段。只有当事件流处在目标阶段的时候，两个的指向才是一样的， 而当处于捕获和冒泡阶段的时候，</li> <li>target 指向被单击的对象而 currentTarget 指向当前事件活动的对象（一般为父级）。</li></ul> <h3 id="事件委托"><a href="#事件委托" aria-hidden="true" class="header-anchor">#</a> 事件委托</h3> <p>因为事件具有冒泡机制，因此我们可以利用冒泡的原理，把事件加到父级上，触发执行效果。这样做的好处当然就是提高性能了</p> <p>最重要的是通过<code>event.target.nodeName</code>判断子元素</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">;</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token string">&quot;bubble&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">4</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> aUl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsById</span><span class="token punctuation">(</span><span class="token string">'bubble'</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> aLi <span class="token operator">=</span> aUl<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span>

  <span class="token comment">//不管在哪个事件中，只要你操作的那个元素就是事件源。</span>
  <span class="token comment">// ie：window.event.srcElement</span>
  <span class="token comment">// 标准下:event.target</span>
  aUl<span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> ev <span class="token operator">=</span> ev <span class="token operator">||</span> window<span class="token punctuation">.</span>event
    <span class="token keyword">var</span> target <span class="token operator">=</span> ev<span class="token punctuation">.</span>target <span class="token operator">||</span> ev<span class="token punctuation">.</span>srcElement

    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'li'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'blue'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="跨域"><a href="#跨域" aria-hidden="true" class="header-anchor">#</a> 跨域</h2> <p>什么是同源策略即限制</p> <p>同源策略限制从一个源加载的文档或脚本如何与与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的关键的安全机制。</p> <ul><li>一个源包括：协议(http\https)、域名(www.xxx.xxx)、端口(default:80)</li> <li>只要源不同就跨域了</li></ul> <p>限制</p> <ul><li>Cookie、LocalStorage 和 IndexDB 无法读取</li> <li>DOM 无法获得</li> <li>AJAX 请求不能发送</li></ul> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>script、image、iframe 的 src 都不受同源策略的影响。</p></div> <ol><li>JSONP,回调函数+数据就是 JSON With Padding，简单、易部署。（做法：动态插入 script 标签，设置其 src 属性指向提供 JSONP 服务的 URL 地址，查询字符串中加入 callback 指定回调函数，返回的 JSON 被包裹在回调函数中以字符串的形式被返回，需将 script 标签插入 body 底部）。缺点是只支持 GET，不支持 POST（原因是通过地址栏传参所以只能使用 GET）</li> <li>document.domain 跨子域 （ 例如 a.qq.com 嵌套一个 b.qq.com 的 iframe ，如果 a.qq.com 设置 document.domain 为 qq.com 。b.qq.com 设置 document.domain 为 qq.com， 那么他俩就能互相通信了，不受跨域限制了。 注意：只能跨子域）</li> <li>window.name + iframe ==&gt; http://www.tuicool.com/articles/viMFbqV，支持跨主域。不支持POST</li> <li>HTML5 的 postMessage()方法允许来自不同源的脚本采用异步方式进行有限的通信，可以实现跨文本档、多窗口、跨域消息传递。适用于不同窗口 iframe 之间的跨域</li> <li>CORS（Cross Origin Resource Share）对方服务端设置响应头</li> <li>服务端代理</li></ol> <p>在浏览器客户端不能跨域访问，而服务器端调用 HTTP 接口只是使用 HTTP 协议，不会执行 JS 脚本，不需要同源策略，也就没有跨越问题。简单地说，就是浏览器不能跨域，后台服务器可以跨域。（一种是通过 http-proxy-middleware 插件设置后端代理；另一种是通过使用 http 模块发出请求）</p> <p>CORS 请求默认不发送 Cookie 和 HTTP 认证信息。如果要把 Cookie 发到服务器，一方面要服务器同意，指定<code>Access-Control-Allow-Credentials</code>字段。</p> <h2 id="cookie"><a href="#cookie" aria-hidden="true" class="header-anchor">#</a> Cookie</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Set<span class="token operator">-</span>Cookie<span class="token punctuation">:</span> value<span class="token punctuation">[</span><span class="token punctuation">;</span> expires<span class="token operator">=</span>date<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">;</span> domain<span class="token operator">=</span>domain<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">;</span> path<span class="token operator">=</span>path<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">;</span> secure<span class="token punctuation">]</span>
</code></pre></div><p>如果想让 cookie 存在一段时间，就要为 expires 属性设置为未来的一个用毫秒数表示的过期日期或时间点，expires 默认为设置的 expires 的当前时间。现在已经被 max-age 属性所取代，max-age 用秒来设置 cookie 的生存期。如果 max-age 为 0，则表示删除该 cookie。</p> <p>cookie 的属性：</p> <ul><li>HttpOnly 属性告之浏览器该 cookie 绝不能通过 JavaScript 的 <code>document.cookie</code> 属性访问。</li> <li>domain 属性可以使多个 web 服务器共享 cookie。</li> <li>只有 path 属性匹配向服务器发送的路径，Cookie 才会发送。必须是绝对路径</li> <li>secure 属性用来指定 Cookie 只能在加密协议 HTTPS 下发送到服务器。</li> <li>max-age 属性用来指定 Cookie 有效期</li> <li>expires 属性用于指定 Cookie 过期时间。它的格式采用 Date.toUTCString()的格式。</li></ul> <p>浏览器的同源政策规定，两个网址只要域名相同和端口相同，就可以共享 Cookie。</p> <h2 id="websocket"><a href="#websocket" aria-hidden="true" class="header-anchor">#</a> websocket</h2> <p>WebSocket 使用 ws 或 wss 协议，Websocket 是一个持久化的协议，相对于 HTTP 这种非持久的协议来说。</p> <p>WebSocket API 最伟大之处在于服务器和客户端可以在给定的时间范围内的任意时刻，相互推送信息。WebSocket 并不限于以 Ajax(或 XHR)方式通信，因为 Ajax 技术需要客户端发起请求，而 WebSocket 服务器和客户端可以彼此相互推送信息；XHR 受到域的限制，而 WebSocket 允许跨域通信。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 创建一个Socket实例</span>
<span class="token keyword">var</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">'ws://localhost:8080'</span><span class="token punctuation">)</span>
<span class="token comment">// 打开Socket</span>
socket<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 发送一个初始化消息</span>
  socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;I am the client and I'm listening!&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">// 监听消息</span>
  socket<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Client received a message'</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 监听Socket的关闭</span>
  socket<span class="token punctuation">.</span><span class="token function-variable function">onclose</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Client notified socket has closed'</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 关闭Socket....</span>
  <span class="token comment">//socket.close()</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="fetch-和-ajax"><a href="#fetch-和-ajax" aria-hidden="true" class="header-anchor">#</a> fetch 和 Ajax</h2> <p><code>XMLHttpRequest</code> 是一个设计粗糙的 API，不符合关注分离（Separation of Concerns）的原则，配置和调用方式非常混乱，而且基于事件的异步模型写起来也没有现代的 Promise，<code>generator/yield</code>，<code>async/await</code> 友好。</p> <p>fetch 是浏览器提供的一个新的 web API，它用来代替 Ajax（XMLHttpRequest），其提供了更优雅的接口，更灵活强大的功能。</p> <p>Fetch 优点主要有：</p> <ul><li>语法简洁，更加语义化</li> <li>基于标准 Promise 实现，支持 <code>async/await</code></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>data <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Oops, error'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ajax-请求和原理"><a href="#ajax-请求和原理" aria-hidden="true" class="header-anchor">#</a> ajax 请求和原理</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHTTPRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 请求 method 和 URI</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>
<span class="token comment">// 请求内容</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 响应状态</span>
xhr<span class="token punctuation">.</span>status
<span class="token comment">// xhr 对象的事件响应</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
xhr<span class="token punctuation">.</span>readyState
<span class="token comment">// 响应内容</span>
xhr<span class="token punctuation">.</span>responseText
</code></pre></div><p>AJAX 的工作原理</p> <p>Ajax 的工作原理相当于在用户和服务器之间加了—个中间层(AJAX 引擎),使用户操作与服务器响应异步化。　 Ajax 的原理简单来说通过 XmlHttpRequest 对象来向服务器发异步请求，从服务器获得数据，然后用 javascript 来操作 DOM 而更新页面。</p> <p>ajax 优缺点</p> <p>优点：</p> <ul><li>无刷新更新数据</li> <li>异步与服务器通信</li> <li>前后端负载均衡</li></ul> <p>缺点：</p> <ol><li>ajax 干掉了 Back 和 history 功能，对浏览器机制的破坏</li> <li>对搜索引擎支持较弱</li> <li>违背了 URI 和资源定位的初衷</li></ol></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/front-end/js.html" class="prev">
          JS
        </a></span> <span class="next"><a href="/front-end/css.html">
          CSS
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/9.7f41828b.js" defer></script><script src="/assets/js/app.17e7384b.js" defer></script>
  </body>
</html>
